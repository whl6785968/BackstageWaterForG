webpackJsonp([14],{"13Y9":function(e,t){},H2SQ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("IpwV"),s=n("TIfe"),i={data:function(){return{roles:"",activeColItem:-1,data:[],checkedKeys:[]}},inject:["reload","reloadNevigate"],mounted:function(){this.initRoles()},methods:{initRoles:function(){var e=this;this.$store.dispatch("menu/getRoles").then(function(t){e.roles=t})},collapseChange:function(e){var t=this;""!=e&&this.$store.dispatch("menu/getAllMenuTree",e).then(function(e){t.data=e.menus,t.checkedKeys=e.mids})},cancelUpdateRoleMenu:function(){this.activeColItem=-1},updateRoleMenu:function(e){var t=this,n=this.$refs.tree[e].getCheckedKeys(!0),i=(this.activeColItem,{role_id:this.activeColItem,mids:n});this.$store.dispatch("menu/updateRoleMenu",i).then(function(e){if(200==e.status){t.$message({message:"修改成功",type:"success"}),t.reload();var n=Object(s.a)();t.$store.dispatch("user/getInfo",n).then(function(e){var n=e.obj;Object(a.b)(t.$router,t.$store,n)}),t.reloadNevigate()}})}}},o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"menuConfig"},[n("div",{staticClass:"menuConfigByRole"},[n("el-collapse",{attrs:{accordion:""},on:{change:e.collapseChange},model:{value:e.activeColItem,callback:function(t){e.activeColItem=t},expression:"activeColItem"}},e._l(e.roles,function(t,a){return n("el-collapse-item",{key:a,attrs:{name:t.roleid}},[n("template",{slot:"title"},[e._v("\n          "+e._s(t.roleName)),n("i",{staticClass:"header-icon el-icon-info"})]),e._v(" "),n("div",{staticClass:"menu-tree"},[n("el-tree",{ref:"tree",refInFor:!0,attrs:{data:e.data,"show-checkbox":"","node-key":"id","default-expand-all":"","expand-on-click-node":!1,"highlight-current":"","default-checked-keys":e.checkedKeys},scopedSlots:e._u([{key:"default",fn:function(t){t.node;var a=t.data;return n("span",{staticClass:"custom-tree-node"},[n("span",[e._v(e._s(a.title))])])}}],null,!0)})],1),e._v(" "),n("div",{staticStyle:{display:"block","margin-left":"150px"}},[n("el-button",{attrs:{size:"mini"},on:{click:e.cancelUpdateRoleMenu}},[e._v("取消修改")]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.updateRoleMenu(a)}}},[e._v("确认修改")])],1)],2)}),1)],1)])},staticRenderFns:[]};var l=n("VU/8")(i,o,!1,function(e){n("13Y9")},null,null);t.default=l.exports}});
//# sourceMappingURL=14.ed9164a9c3f01408a7b6.js.map