webpackJsonp([2],{"9m2S":function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});l("TEhC");var a={data:function(){return{tableData:[],dialogFormVisible:!1,form:{username:"",role:"",id:""},formLabelWidth:"120px"}},mounted:function(){this.initData()},inject:["reload"],methods:{handleEdit:function(e,t){this.dialogFormVisible=!0;var l=t.userId;this.form.username=l,this.form.id=t.id},handleDelete:function(e,t){console.log(e,t),alert(t.userId)},initData:function(){var e=this;this.$store.dispatch("user/getUserRole").then(function(t){t&&(e.tableData=t)})},submitForm:function(e){var t=this;this.$store.dispatch("user/changeRole",e).then(function(e){200==e&&(t.$message({message:"修改成功",type:"success"}),t.dialogFormVisible=!1,t.reload())})}}},o={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"auth"},[l("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[l("el-table-column",{attrs:{label:"id",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.id))])]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"用户名",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-tag",[e._v(e._s(t.row.userId))])]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"角色",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-tag",[e._v(e._s(t.row.role_name))])]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{size:"mini"},on:{click:function(l){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),l("el-button",{directives:[{name:"has",rawName:"v-has",value:["ROLE_ADMIN","ROLE_CLIENT"],expression:"['ROLE_ADMIN','ROLE_CLIENT']"}],attrs:{size:"mini",type:"danger"},on:{click:function(l){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),l("el-dialog",{staticStyle:{"margin-left":"170px","margin-top":"10px"},attrs:{title:"修改权限",visible:e.dialogFormVisible,modal:!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[l("el-form",{attrs:{model:e.form}},[l("el-form-item",{attrs:{label:"ID","label-width":e.formLabelWidth}},[l("el-input",{staticStyle:{width:"200px"},attrs:{autocomplete:"off",disabled:"",placeholder:this.form.id},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"用户名","label-width":e.formLabelWidth}},[l("el-input",{staticStyle:{width:"200px"},attrs:{autocomplete:"off",disabled:"",placeholder:this.form.username},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"选择角色","label-width":e.formLabelWidth}},[l("el-select",{attrs:{placeholder:"请选择角色"},model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",t)},expression:"form.role"}},[l("el-option",{attrs:{label:"ROLE_ADMIN",value:"777"}}),e._v(" "),l("el-option",{attrs:{label:"ROLE_CLIENT",value:"001"}}),e._v(" "),l("el-option",{attrs:{label:"ROLE_VISITOR",value:"002"}})],1)],1)],1),e._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm(e.form)}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var i=l("VU/8")(a,o,!1,function(e){l("LWZO")},null,null);t.default=i.exports},LWZO:function(e,t){},TEhC:function(e,t,l){"use strict";var a=l("7+uW");a.default.directive("has",{inserted:function(e,t,l){a.default.prototype.$_has(t.value)||e.parentNode.removeChild(e)}});a.default.prototype.$_has=function(e){var t=!1,l=sessionStorage.getItem("role");return void 0!=l&&null!=l&&(e.forEach(function(e,a){l==e&&(t=!0)}),t)}}});
//# sourceMappingURL=2.01d8db134b463e7791cf.js.map