{"version":3,"sources":["webpack:///src/components/msg/posting/index.vue","webpack:///./src/components/msg/posting/index.vue?9bfc","webpack:///./src/components/msg/posting/index.vue"],"names":["posting","data","sizeForm","name","type","isEmergency","content","imgList","uid","dialogImageUrl","dialogVisible","headers","X-Token","Object","auth","methods","onSubmit","_this","this","console","log","$store","state","user","id","dispatch","then","response","status","$message","message","msg","sessionStorage","getItem","$router","push","handleRemove","file","fileList","_this2","obj","handleChange","alert","handleSuccess","msg_posting","render","_vm","_h","$createElement","_c","_self","staticClass","staticStyle","width","margin-left","ref","attrs","model","label-width","size","label","value","callback","$$v","$set","expression","_v","action","list-type","on-preview","handlePictureCardPreview","on-remove","on-success","on-change","visible","on","update:visible","$event","src","alt","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"wHA+CAA,GACAC,KADA,WAEA,OACAC,UACAC,KAAA,GACAC,QACAC,aAAA,EACAC,QAAA,GACAC,WACAC,IAAA,IAEAC,eAAA,GACAC,eAAA,EACAC,SAAAC,UAAAC,OAAAC,EAAA,EAAAD,MAGAE,SACAC,SADA,WACA,IAAAC,EAAAC,KACAC,QAAAC,IAAA,WACAF,KAAAhB,SAAAG,YACAa,KAAAhB,SAAAG,YAAA,EAGAa,KAAAhB,SAAAG,YAAA,EAGAa,KAAAhB,SAAAM,IAAAU,KAAAG,OAAAC,MAAAC,KAAAC,GAGAN,KAAAG,OAAAI,SAAA,cAAAP,KAAAhB,UAAAwB,KAAA,SAAAC,IACAA,EAAAC,OAAA,OACAX,EAAAY,UACAC,QAAAH,EAAAI,IACA3B,KAAA,YAEAa,EAAAf,SAAAG,aAAA,EACAY,EAAAf,SAAAM,IAAA,GACAS,EAAAI,OAAAI,SAAA,YAEA,cADAO,eAAAC,QAAA,QAEAhB,EAAAiB,QAAAC,KAAA,eAGAlB,EAAAiB,QAAAC,KAAA,yBAKAC,aAhCA,SAgCAC,EAAAC,GAAA,IAAAC,EAAArB,KACAC,QAAAC,IAAAiB,EAAAC,GACApB,KAAAG,OAAAI,SAAA,iBAAAY,EAAAV,SAAAa,KAAAd,KAAA,SAAAC,GACA,KAAAA,EAAAC,QACAW,EAAAV,UACAC,QAAA,OACA1B,KAAA,eAKAqC,aA3CA,SA2CAJ,EAAAC,GACAI,MAAA,MAEAC,cA9CA,SA8CAhB,EAAAU,EAAAC,GACApB,KAAAhB,SAAAK,QAAA4B,KAAAR,EAAAa,QC3GeI,GADEC,OAFjB,WAA0B,IAAAC,EAAA5B,KAAa6B,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,SAAmBF,EAAA,OAAYE,YAAA,SAAAC,aAAkCC,MAAA,QAAAC,cAAA,WAAuCL,EAAA,WAAgBM,IAAA,OAAAC,OAAkBC,MAAAX,EAAA5C,SAAAwD,cAAA,OAAAC,KAAA,YAA2DV,EAAA,gBAAqBO,OAAOI,MAAA,QAAcX,EAAA,YAAiBQ,OAAOI,MAAAf,EAAA5C,SAAA,KAAA4D,SAAA,SAAAC,GAAmDjB,EAAAkB,KAAAlB,EAAA5C,SAAA,OAAA6D,IAAoCE,WAAA,oBAA6B,GAAAnB,EAAAoB,GAAA,KAAAjB,EAAA,gBAAqCO,OAAOI,MAAA,QAAcX,EAAA,qBAA0BQ,OAAOI,MAAAf,EAAA5C,SAAA,KAAA4D,SAAA,SAAAC,GAAmDjB,EAAAkB,KAAAlB,EAAA5C,SAAA,OAAA6D,IAAoCE,WAAA,mBAA6BhB,EAAA,sBAA2BO,OAAOI,MAAA,OAAAzD,KAAA,UAA8B2C,EAAAoB,GAAA,KAAAjB,EAAA,sBAAuCO,OAAOI,MAAA,OAAAzD,KAAA,UAA8B2C,EAAAoB,GAAA,KAAAjB,EAAA,sBAAuCO,OAAOI,MAAA,KAAAzD,KAAA,WAA4B,OAAA2C,EAAAoB,GAAA,KAAAjB,EAAA,gBAAyCO,OAAOI,MAAA,UAAgBX,EAAA,aAAkBQ,OAAOI,MAAAf,EAAA5C,SAAA,YAAA4D,SAAA,SAAAC,GAA0DjB,EAAAkB,KAAAlB,EAAA5C,SAAA,cAAA6D,IAA2CE,WAAA,2BAAoC,GAAAnB,EAAAoB,GAAA,KAAAjB,EAAA,gBAAqCO,OAAOI,MAAA,UAAgBX,EAAA,aAAkBO,OAAOW,OAAA,aAAAxD,QAAAmC,EAAAnC,QAAAyD,YAAA,eAAAC,aAAAvB,EAAAwB,yBAAAC,YAAAzB,EAAAV,aAAAoC,aAAA1B,EAAAH,cAAA8B,YAAA3B,EAAAL,gBAA2MQ,EAAA,KAAUE,YAAA,mBAA2BL,EAAAoB,GAAA,KAAAjB,EAAA,aAAgCO,OAAOkB,QAAA5B,EAAApC,cAAAiD,KAAA,QAA0CgB,IAAKC,iBAAA,SAAAC,GAAkC/B,EAAApC,cAAAmE,MAA2B5B,EAAA,OAAYO,OAAOH,MAAA,OAAAyB,IAAAhC,EAAArC,eAAAsE,IAAA,SAAkD,GAAAjC,EAAAoB,GAAA,KAAAjB,EAAA,gBAAuCO,OAAOI,MAAA,UAAgBX,EAAA,YAAiBO,OAAOpD,KAAA,WAAAuD,KAAA,UAAkCF,OAAQI,MAAAf,EAAA5C,SAAA,QAAA4D,SAAA,SAAAC,GAAsDjB,EAAAkB,KAAAlB,EAAA5C,SAAA,UAAA6D,IAAuCE,WAAA,uBAAgC,GAAAnB,EAAAoB,GAAA,KAAAjB,EAAA,gBAAqCO,OAAOG,KAAA,WAAgBV,EAAA,aAAkBO,OAAOpD,KAAA,WAAiBuE,IAAKK,MAAAlC,EAAA9B,YAAsB8B,EAAAoB,GAAA,UAAApB,EAAAoB,GAAA,KAAAjB,EAAA,aAAAH,EAAAoB,GAAA,uBAEt/De,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACEpF,EACA4C,GATF,EAVA,SAAAyC,GACEF,EAAQ,SAaV,KAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/19.de54ee1f92c6007e6a95.js","sourcesContent":["<template>\n  <div class=\"post\">\n    <div class=\"post_2\" style=\"width: 500px;margin-left: 400px;\">\n      <el-form ref=\"form\" :model=\"sizeForm\" label-width=\"80px\" size=\"medium\">\n      <el-form-item label=\"标题\">\n        <el-input v-model=\"sizeForm.name\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"类型\">\n        <el-checkbox-group v-model=\"sizeForm.type\">\n          <el-checkbox-button label=\"设备故障\" name=\"type\"></el-checkbox-button>\n          <el-checkbox-button label=\"水质异常\" name=\"type\"></el-checkbox-button>\n          <el-checkbox-button label=\"其他\" name=\"type\"></el-checkbox-button>\n        </el-checkbox-group>\n      </el-form-item>\n      <el-form-item label=\"是否紧急\">\n        <el-switch v-model=\"sizeForm.isEmergency\"></el-switch>\n      </el-form-item>\n      <el-form-item label=\"上传图片\">\n        <el-upload\n            action=\"/uploadPic\"\n            :headers=\"headers\"\n            list-type=\"picture-card\"\n            :on-preview=\"handlePictureCardPreview\"\n            :on-remove=\"handleRemove\"\n            :on-success=\"handleSuccess\"\n            :on-change=\"handleChange\">\n            <i class=\"el-icon-plus\"></i>\n          </el-upload>\n          <el-dialog :visible.sync=\"dialogVisible\" size=\"tiny\">\n            <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\n          </el-dialog>\n      </el-form-item>\n      <el-form-item label=\"详细信息\">\n        <el-input type=\"textarea\" v-model=\"sizeForm.content\" size=\"medium\"></el-input>\n      </el-form-item>\n      <el-form-item size=\"large\">\n        <el-button type=\"primary\" @click=\"onSubmit\">立即创建</el-button>\n        <el-button>取消</el-button>\n      </el-form-item>\n    </el-form>\n    </div>\n  </div>\n</template>\n\n<script>\n  import { getToken } from '@/utils/auth'\n  \n  export default {\n    data() {\n      return {\n        sizeForm: {\n          name: '',\n          type: [],\n          isEmergency:false,\n          content: '',\n          imgList: [],\n          uid: ''\n        },\n        dialogImageUrl: '',\n        dialogVisible: false,\n        headers: {'X-Token':getToken()}\n      };\n    },\n    methods: {\n      onSubmit() {\n        console.log('submit!');\n        if(this.sizeForm.isEmergency){\n          this.sizeForm.isEmergency = 1\n        }\n        else{\n          this.sizeForm.isEmergency = 0\n        }\n\n        this.sizeForm.uid = this.$store.state.user.id\n//      this.sizeForm.uid = sessionStorage.getItem(\"username\")\n        \n        this.$store.dispatch('msg/posting',this.sizeForm).then(response => {\n          if(response.status = 200){\n            this.$message({\n              message: response.msg,\n              type: 'success'\n            })\n            this.sizeForm.isEmergency = false\n            this.sizeForm.uid = ''\n            this.$store.dispatch('msg/send')\n            const role = sessionStorage.getItem(\"role\")\n            if(role == 'ROLE_ADMIN'){\n              this.$router.push('/msg/review')\n            }\n            else{\n              this.$router.push('/msg/readablePost')\n            } \n          }\n        })\n      },\n      handleRemove(file, fileList) {\n        console.log(file, fileList);\n        this.$store.dispatch('msg/deleteFile',file.response.obj).then(response => {\n          if(response.status == 200){\n            this.$message({\n              message: '删除成功',\n              type: 'success'\n            })\n          }\n        })\n      },\n      handleChange(file,fileList){\n        alert(111)\n      },\n      handleSuccess(response,file,fileList){\n        this.sizeForm.imgList.push(response.obj)\n      }\n      \n    }\n  };\n</script>\n\n<style>\n  .post{\n     background-color: #FFFFFF;\n     padding: 32px;\n  }\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/msg/posting/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"post\"},[_c('div',{staticClass:\"post_2\",staticStyle:{\"width\":\"500px\",\"margin-left\":\"400px\"}},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.sizeForm,\"label-width\":\"80px\",\"size\":\"medium\"}},[_c('el-form-item',{attrs:{\"label\":\"标题\"}},[_c('el-input',{model:{value:(_vm.sizeForm.name),callback:function ($$v) {_vm.$set(_vm.sizeForm, \"name\", $$v)},expression:\"sizeForm.name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"类型\"}},[_c('el-checkbox-group',{model:{value:(_vm.sizeForm.type),callback:function ($$v) {_vm.$set(_vm.sizeForm, \"type\", $$v)},expression:\"sizeForm.type\"}},[_c('el-checkbox-button',{attrs:{\"label\":\"设备故障\",\"name\":\"type\"}}),_vm._v(\" \"),_c('el-checkbox-button',{attrs:{\"label\":\"水质异常\",\"name\":\"type\"}}),_vm._v(\" \"),_c('el-checkbox-button',{attrs:{\"label\":\"其他\",\"name\":\"type\"}})],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"是否紧急\"}},[_c('el-switch',{model:{value:(_vm.sizeForm.isEmergency),callback:function ($$v) {_vm.$set(_vm.sizeForm, \"isEmergency\", $$v)},expression:\"sizeForm.isEmergency\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"上传图片\"}},[_c('el-upload',{attrs:{\"action\":\"/uploadPic\",\"headers\":_vm.headers,\"list-type\":\"picture-card\",\"on-preview\":_vm.handlePictureCardPreview,\"on-remove\":_vm.handleRemove,\"on-success\":_vm.handleSuccess,\"on-change\":_vm.handleChange}},[_c('i',{staticClass:\"el-icon-plus\"})]),_vm._v(\" \"),_c('el-dialog',{attrs:{\"visible\":_vm.dialogVisible,\"size\":\"tiny\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('img',{attrs:{\"width\":\"100%\",\"src\":_vm.dialogImageUrl,\"alt\":\"\"}})])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"详细信息\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"size\":\"medium\"},model:{value:(_vm.sizeForm.content),callback:function ($$v) {_vm.$set(_vm.sizeForm, \"content\", $$v)},expression:\"sizeForm.content\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"size\":\"large\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onSubmit}},[_vm._v(\"立即创建\")]),_vm._v(\" \"),_c('el-button',[_vm._v(\"取消\")])],1)],1)],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-24570bec\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/msg/posting/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-24570bec\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-24570bec\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/msg/posting/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}