webpackJsonp([15],{R9MU:function(t,e){},"bVy+":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("XLwt"),i={data:function(){return{curry:[],prey:[],tx:["Ⅰ类","Ⅱ类","Ⅲ类","Ⅳ类","Ⅴ类"],greaterThree:0,greaterThreeRate:0,terribleFive:0,terribleFour:0,terribleFiveRate:0,stationCount:0,preGreaterThree:0,preGreaterThreeRate:0,tableData:[],breakDownEquipCount:0,tableData2:[],createTime:this.$route.params.createTime,done:[],dtwo:[],dthree:[],dfour:[],dfive:[],districts:[],dy:[],districtOption:{title:{text:"本周所有站点的水质等级统计",subtext:"纯属虚构",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:this.districts},series:[{name:"数量",type:"pie",radius:"55%",center:["50%","60%"],data:[],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}}},mounted:function(){this.initData()},methods:{initData:function(){var t=this;this.$store.dispatch("report/getHistoryDetails",this.createTime).then(function(e){var a=e.obj;t.stationCount=a.length;for(var r=0,i=0,l=0,s=0,n=0,o=0,c=0,h=0,d=0,u=0,p=0;p<a.length;p++)switch(a[p].currLevel){case 1:r+=1;break;case 2:l+=1;break;case 3:n+=1;break;case 4:c+=1;break;case 5:d+=1}for(var v=0;v<a.length;v++)switch(a[v].preLevel){case 1:i+=1;break;case 2:s+=1;break;case 3:o+=1;break;case 4:h+=1;break;case 5:u+=1}t.greaterThree=n+r+l,t.greaterThreeRate=(t.greaterThree/t.stationCount*100).toFixed(2),t.preGreaterThree=i+s+o,t.preGreaterThreeRate=(t.preGreaterThree/t.stationCount*100).toFixed(2),t.terribleFour=c,t.terribleFive=d;var m=[{name:t.tx[0],value:r},{name:t.tx[1],value:l},{name:t.tx[2],value:n},{name:t.tx[3],value:c},{name:t.tx[4],value:d}],b=[{name:t.tx[0],value:i},{name:t.tx[1],value:s},{name:t.tx[2],value:o},{name:t.tx[3],value:h},{name:t.tx[4],value:u}];t.curry=m,t.prey=b,t.showChart(),t.$store.dispatch("report/getHistoryByDistrict",t.createTime).then(function(e){var a=e.obj,r=[],i=[],l=[],s=[],n=[],o=[];for(var c in a)r.push(c),i.push({name:c,value:a[c][0]}),l.push({name:c,value:a[c][1]}),s.push({name:c,value:a[c][2]}),n.push({name:c,value:a[c][3]}),o.push({name:c,value:a[c][4]});var h=[];h.push(i),h.push(l),h.push(s),h.push(n),h.push(o),t.districts=r,t.done=i,t.dtwo=l,t.dthree=s,t.dfive=o,t.dfour=n,t.dy=h,t.showDistrictChart()}),t.$store.dispatch("report/getBreakDownEquip").then(function(e){t.tableData=e.obj,t.breakDownEquipCount=e.obj.length})})},goBack:function(){if(window.history.length<=1)return this.$router.push({path:"/home"}),!1;this.$router.go(-1)},showDistrictChart:function(){for(var t=0;t<this.dy.length;t++){this.districtOption.series[0].data=this.dy[t],this.districtOption.title.text=this.tx[t]+"水质区域分布",r.init(document.getElementById(this.tx[t]),"light").setOption(this.districtOption)}},showChart:function(){var t={title:{text:"本周所有站点的水质等级统计",subtext:"纯属虚构",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:this.tx},series:[{name:"数量",type:"pie",radius:"55%",center:["50%","60%"],data:this.curry,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},e={title:{text:"上周所有站点的水质等级统计",subtext:"纯属虚构",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:this.tx},series:[{name:"数量",type:"pie",radius:"55%",center:["50%","60%"],data:this.prey,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};r.init(document.getElementById("AllStationStatistic"),"light").setOption(t),r.init(document.getElementById("AllStationPreStatistic"),"light").setOption(e)}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"report"},[a("div",{staticClass:"top"},[a("div",{staticClass:"back"},[a("el-page-header",{attrs:{content:"详情页面"},on:{back:t.goBack}})],1)]),t._v(" "),a("div",{staticClass:"body"},[a("div",{staticClass:"title",staticStyle:{width:"100%","text-align":"center","margin-bottom":"50px"}},[a("h3",[t._v(t._s(t.createTime)+"水质自动监测周报")])]),t._v(" "),a("el-row",[a("div",{staticClass:"content1",staticStyle:{"margin-bottom":"50px"}},[t._v("\n      如下图， 本周所监测的"+t._s(t.stationCount)+"个站点中优于Ⅲ类水质的站点有"+t._s(t.greaterThree)+"个,占比"+t._s(t.greaterThreeRate)+"%, "+t._s(t.greaterThree>t.preGreaterThree?"同比增长"+(t.greaterThreeRate-t.preGreaterThreeRate)+"个百分点":"同比下降"+(t.preGreaterThreeRate-t.greaterThreeRate)+"个百分点")+", Ⅳ类水质站点有"+t._s(t.terribleFour)+"个, Ⅴ类水质站点有"+t._s(t.terribleFive)+"个\n    ")])]),t._v(" "),a("el-row",[a("div",{staticClass:"el-col el-col-24 el-col-xs-24 el-col-md-12 el-col-12"},[a("div",{staticStyle:{height:"300px",width:"100%"},attrs:{id:"AllStationStatistic"}})]),t._v(" "),a("div",{staticClass:"el-col el-col-24 el-col-xs-24 el-col-md-12 el-col-12"},[a("div",{staticStyle:{height:"300px",width:"100%"},attrs:{id:"AllStationPreStatistic"}})])]),t._v(" "),a("el-row",[a("div",{staticStyle:{"margin-bottom":"50px"}},[t._v("\n      下图为各类水质的区域分布：\n    ")])]),t._v(" "),a("el-row",t._l(t.tx,function(t,e){return a("div",{key:e,staticClass:"el-col el-col-24 el-col-xs-24 el-col-md-12 el-col-12",staticStyle:{"padding-bottom":"50px"}},[a("div",{staticStyle:{height:"300px",width:"100%"},attrs:{id:t}})])}),0),t._v(" "),a("el-row",[a("div",{staticClass:"content2",staticStyle:{"margin-bottom":"50px","margin-top":"50px"}},[t._v("\n      截至目前，仍有"+t._s(t.breakDownEquipCount)+"个设备处于故障状态，请尽快联系其负责人进行维修，故障设备和负责人联系方式如下:\n    ")])]),t._v(" "),a("el-row",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{fixed:"",prop:"id",label:"设备ID",width:"150",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",ltableDataabel:"设备名称",width:"150",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"model",label:"型号",width:"150",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"productionplace",label:"生产商",width:"150",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"station.name",label:"所属站点",width:"120",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"station.userinfo.uid",label:"负责人ID",width:"120",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"station.userinfo.name",label:"负责人名称",width:"120",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"station.userinfo.link",label:"负责人联系方式",width:"150",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleClick(e.row)}}},[t._v("查看")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"}},[t._v("编辑")])]}}])})],1)],1)],1)])},staticRenderFns:[]};var s=a("VU/8")(i,l,!1,function(t){a("R9MU")},null,null);e.default=s.exports}});
//# sourceMappingURL=15.aaa34466a9ebdd319738.js.map