webpackJsonp([19],{"6cy5":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("TIfe"),o={data:function(){return{sizeForm:{name:"",type:[],isEmergency:!1,content:"",imgList:[],uid:""},dialogImageUrl:"",dialogVisible:!1,headers:{"X-Token":Object(i.a)()}}},methods:{onSubmit:function(){var e=this;console.log("submit!"),this.sizeForm.isEmergency?this.sizeForm.isEmergency=1:this.sizeForm.isEmergency=0,this.sizeForm.uid=this.$store.state.user.id,this.$store.dispatch("msg/posting",this.sizeForm).then(function(t){(t.status=200)&&(e.$message({message:t.msg,type:"success"}),e.sizeForm.isEmergency=!1,e.sizeForm.uid="",e.$store.dispatch("msg/send"),"ROLE_ADMIN"==sessionStorage.getItem("role")?e.$router.push("/msg/review"):e.$router.push("/msg/readablePost"))})},handleRemove:function(e,t){var s=this;console.log(e,t),this.$store.dispatch("msg/deleteFile",e.response.obj).then(function(e){200==e.status&&s.$message({message:"删除成功",type:"success"})})},handleChange:function(e,t){alert(111)},handleSuccess:function(e,t,s){this.sizeForm.imgList.push(e.obj)}}},a={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"post"},[s("div",{staticClass:"post_2",staticStyle:{width:"500px","margin-left":"400px"}},[s("el-form",{ref:"form",attrs:{model:e.sizeForm,"label-width":"80px",size:"medium"}},[s("el-form-item",{attrs:{label:"标题"}},[s("el-input",{model:{value:e.sizeForm.name,callback:function(t){e.$set(e.sizeForm,"name",t)},expression:"sizeForm.name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"类型"}},[s("el-checkbox-group",{model:{value:e.sizeForm.type,callback:function(t){e.$set(e.sizeForm,"type",t)},expression:"sizeForm.type"}},[s("el-checkbox-button",{attrs:{label:"设备故障",name:"type"}}),e._v(" "),s("el-checkbox-button",{attrs:{label:"水质异常",name:"type"}}),e._v(" "),s("el-checkbox-button",{attrs:{label:"其他",name:"type"}})],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"是否紧急"}},[s("el-switch",{model:{value:e.sizeForm.isEmergency,callback:function(t){e.$set(e.sizeForm,"isEmergency",t)},expression:"sizeForm.isEmergency"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"上传图片"}},[s("el-upload",{attrs:{action:"/uploadPic",headers:e.headers,"list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"on-success":e.handleSuccess,"on-change":e.handleChange}},[s("i",{staticClass:"el-icon-plus"})]),e._v(" "),s("el-dialog",{attrs:{visible:e.dialogVisible,size:"tiny"},on:{"update:visible":function(t){e.dialogVisible=t}}},[s("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1),e._v(" "),s("el-form-item",{attrs:{label:"详细信息"}},[s("el-input",{attrs:{type:"textarea",size:"medium"},model:{value:e.sizeForm.content,callback:function(t){e.$set(e.sizeForm,"content",t)},expression:"sizeForm.content"}})],1),e._v(" "),s("el-form-item",{attrs:{size:"large"}},[s("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("立即创建")]),e._v(" "),s("el-button",[e._v("取消")])],1)],1)],1)])},staticRenderFns:[]};var r=s("VU/8")(o,a,!1,function(e){s("koFS")},null,null);t.default=r.exports},koFS:function(e,t){}});
//# sourceMappingURL=19.de54ee1f92c6007e6a95.js.map