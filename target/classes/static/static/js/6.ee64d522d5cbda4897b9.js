webpackJsonp([6],{kQA1:function(t,e){},yXaD:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("lHA8"),l=i.n(a),n=i("c/Tr"),o=i.n(n),s={data:function(){return{mapData:"",latitude:[],longtitude:[],currLevel:[],title:[],markPoint:[],infoWindow:[],tableData:[],formLabelAlign:{district:"",responsible:"",level:""},responsible:[],districts:[],isInit:!0,mapDataLen:0}},mounted:function(){this.initData(),this.initMap()},updated:function(){map.clearOverlays(),this.updateInfo()},inject:["reload"],methods:{initData:function(){var t=this;this.$store.dispatch("datar/getStationForMap",this.formLabelAlign).then(function(e){t.mapData=e,t.tableData=e,t.mapDataLen=e.length;for(var i=[],a=[],l=[],n=[],o=[],s=[],r=0;r<e.length;r++)i.push(e[r].latitude),a.push(e[r].longtitude),l.push(e[r].currlevel),n.push(e[r].name);if(t.latitude=i,t.longtitude=a,t.title=n,t.currLevel=l,t.isInit){for(var c=0;c<e.length;c++)o.push(e[c].userinfo),s.push(e[c].district);t.responsible=t.realUnique(o),t.districts=t.realUnique(s),t.isInit=!1}})},markerFun:function(t,e,i){var a=new BMap.Marker(t);map.addOverlay(a),a.setLabel(e),a.addEventListener("click",function(e){map.openInfoWindow(i,t)})},updateInfo:function(){var t=this;this.$refs.card.forEach(function(e,i){t.infoWindow.push(e)});for(var e=[],i=0;i<this.mapData.length;i++)e.push({y:this.longtitude[i],x:this.latitude[i],title:this.title[i],currLevel:this.currLevel[i],content:this.infoWindow[i]});this.markPoint=e;for(var a=0;a<this.markPoint.length;a++){var l=new BMap.Point(this.markPoint[a].y,this.markPoint[a].x),n=new BMap.Label(this.markPoint[a].title),o=new BMap.InfoWindow(this.markPoint[a].content,{width:300,height:200});this.markerFun(l,n,o)}},initMap:function(){var t=new BMap.Map(this.$refs.mapForStation),e=new BMap.Point(118.7809,35);t.enableScrollWheelZoom(!0),t.centerAndZoom(e,5),t.addControl(new BMap.NavigationControl),t.addControl(new BMap.GeolocationControl),t.addControl(new BMap.OverviewMapControl),t.addControl(new BMap.MapTypeControl),window.map=t},unique:function(t){return o()(new l.a(t.sort()))},realUnique:function(t){var e=[];if(null!=t&&0!=t.length){e.push(t[0]);for(var i=1;i<t.length;i++){for(var a=!1,l=0;l<e.length;l++)if(t[i].name==e[l].name){a=!0;break}a||e.push(t[i])}}return e},onSubmit:function(){this.initData()},panTo:function(t,e,i){for(var a=document.getElementsByClassName("resultDiv"),l=0;l<a.length;l++)a[l].classList.remove("activeDiv");i.currentTarget.classList.add("activeDiv"),map.panTo(new BMap.Point(t,e))}}},r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"oriention"},[i("el-row",[i("div",{staticClass:"el-col el-col-24 el-col-xs-6 el-col-md-6 el-col-lg-6"},[i("div",{staticClass:"navigationMenu",staticStyle:{"background-color":"#FFFFFF"}},[i("div",{staticStyle:{width:"100%",height:"35px","background-color":"#409EFF","border-radius":"5px","text-align":"center","line-height":"35px"}},[i("font",{staticStyle:{color:"white"}},[t._v("查询条件")])],1),t._v(" "),i("div",{staticClass:"mapCondition",staticStyle:{padding:"15px"}},[i("div",{staticStyle:{"margin-bottom":"10px"}},[i("el-select",{staticStyle:{width:"145px"},attrs:{placeholder:"请选择区域 ",size:"small"},model:{value:t.formLabelAlign.district,callback:function(e){t.$set(t.formLabelAlign,"district",e)},expression:"formLabelAlign.district"}},[i("el-option",{attrs:{label:"---请选择区域---",value:""}}),t._v(" "),t._l(this.districts,function(t,e){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})],2),t._v(" "),i("el-select",{staticStyle:{width:"140px"},attrs:{placeholder:"请选择水质等级 ",size:"small"},model:{value:t.formLabelAlign.level,callback:function(e){t.$set(t.formLabelAlign,"level",e)},expression:"formLabelAlign.level"}},[i("el-option",{attrs:{label:"---请选择水质---",value:""}}),t._v(" "),i("el-option",{attrs:{label:"1",value:"1"}}),t._v(" "),i("el-option",{attrs:{label:"2",value:"2"}}),t._v(" "),i("el-option",{attrs:{label:"3",value:"3"}}),t._v(" "),i("el-option",{attrs:{label:"4",value:"4"}}),t._v(" "),i("el-option",{attrs:{label:"5",value:"5"}})],1)],1),t._v(" "),i("div",[i("el-select",{staticStyle:{width:"185px"},attrs:{placeholder:"请选择负责人 ",size:"small"},model:{value:t.formLabelAlign.responsible,callback:function(e){t.$set(t.formLabelAlign,"responsible",e)},expression:"formLabelAlign.responsible"}},[i("el-option",{attrs:{label:"---请选择负责人---",value:""}}),t._v(" "),t._l(this.responsible,function(t,e){return i("el-option",{key:t.uid,attrs:{label:t.name,value:t.uid}})})],2),t._v(" "),i("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:t.onSubmit}},[t._v("查询")])],1)]),t._v(" "),i("div",{staticStyle:{width:"100%",height:"35px","background-color":"#409EFF","border-radius":"5px","text-align":"center","line-height":"35px"}},[i("font",{staticStyle:{color:"white"}},[t._v("查询结果:共"+t._s(t.mapDataLen)+"条记录")])],1),t._v(" "),i("div",{staticClass:"mapResult"},t._l(t.mapData,function(e,a){return i("div",{key:e.id,staticClass:"resultDiv",on:{click:function(i){return t.panTo(e.longtitude,e.latitude,i)}}},[i("div",{staticStyle:{"padding-left":"10px","padding-top":"5px"}},[i("font",{attrs:{color:"#1a8bff"}},[t._v(t._s(e.name))])],1),t._v(" "),i("div",{staticStyle:{display:"flex","justify-content":"space-between",padding:"10px"}},[i("span",[t._v("上周水质等级:"+t._s(e.prelevel))]),t._v(" "),i("span",[t._v("当前水质等级:"+t._s(e.currlevel))])])])}),0)])]),t._v(" "),i("div",{staticClass:"el-col el-col-24 el-col-xs-18 el-col-md-18 el-col-lg-18"},[i("div",{staticClass:"map-container"},[i("div",{ref:"mapForStation",staticClass:"map",attrs:{id:"map"}})])])]),t._v(" "),i("div",{staticStyle:{display:"none"}},t._l(t.mapData,function(e,a){return i("div",{key:e.id,ref:"card",refInFor:!0,staticStyle:{width:"300px","text-align":"center"}},[i("ul",{staticClass:"list-group"},[i("li",{staticClass:"list-group-item active"},[t._v(t._s(e.name))]),t._v(" "),i("li",{staticClass:"list-group-item"},[t._v("当前水质等级："+t._s(e.currlevel))]),t._v(" "),i("li",{staticClass:"list-group-item"},[t._v("上周水质等级："+t._s(e.prelevel))]),t._v(" "),i("li",{staticClass:"list-group-item"},[t._v("负责人: "+t._s(e.userinfo.name))])])])}),0)],1)},staticRenderFns:[]};var c=i("VU/8")(s,r,!1,function(t){i("kQA1")},null,null);e.default=c.exports}});
//# sourceMappingURL=6.ee64d522d5cbda4897b9.js.map