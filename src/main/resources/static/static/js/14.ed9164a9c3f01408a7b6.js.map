{"version":3,"sources":["webpack:///src/components/userManager/menuConfig/index.vue","webpack:///./src/components/userManager/menuConfig/index.vue?aeaf","webpack:///./src/components/userManager/menuConfig/index.vue"],"names":["menuConfig","data","roles","activeColItem","checkedKeys","inject","mounted","this","initRoles","methods","_this","$store","dispatch","then","response","collapseChange","activeNames","_this2","menus","mids","cancelUpdateRoleMenu","updateRoleMenu","index","_this3","$refs","tree","getCheckedKeys","menuData","role_id","status","$message","message","type","reload","hasToken","Object","auth","userid","obj","menuUtil","$router","reloadNevigate","userManager_menuConfig","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","accordion","on","change","model","value","callback","$$v","expression","_l","item","key","name","roleid","slot","_v","_s","roleName","ref","refInFor","show-checkbox","node-key","default-expand-all","expand-on-click-node","highlight-current","default-checked-keys","scopedSlots","_u","fn","node","title","staticStyle","display","margin-left","size","click","$event","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/14.ed9164a9c3f01408a7b6.js","sourcesContent":["<template>\n  <div class=\"menuConfig\">\n    <div class=\"menuConfigByRole\" >\n      <el-collapse accordion @change=\"collapseChange\" v-model=\"activeColItem\">\n        <el-collapse-item v-for=\"(item,index) in roles\" :key=\"index\" :name=\"item.roleid\">\n          <template slot=\"title\">\n            {{item.roleName}}<i class=\"header-icon el-icon-info\"></i>\n          </template>\n          <div class=\"menu-tree\">\n            <el-tree :data=\"data\" show-checkbox node-key=\"id\" default-expand-all :expand-on-click-node=\"false\" ref=\"tree\" highlight-current :default-checked-keys=\"checkedKeys\">\n              <span class=\"custom-tree-node\" slot-scope=\"{ node, data }\">\n                <span>{{ data.title }}</span>\n              </span>\n            </el-tree>\n          </div>\n          <div style=\"display:block;margin-left: 150px\">\n              <!--@click=\"cancelUpdateRoleMenu\"-->\n              <el-button size=\"mini\" @click=\"cancelUpdateRoleMenu\">取消修改</el-button>\n              <el-button type=\"primary\" size=\"mini\" @click=\"updateRoleMenu(index)\">确认修改</el-button>\n            </div>       \n        </el-collapse-item>\n      </el-collapse>\n    </div>\n  </div>\n</template>\n\n<script>\n  import { initmenu } from '@/utils/menuUtil'\n  import { getToken } from '@/utils/auth'\n  export default {\n    data(){\n      return {\n          roles: '',\n          activeColItem: -1,\n          data: [],\n          checkedKeys: []\n      }\n    },\n    inject:['reload','reloadNevigate'],\n    mounted(){\n      this.initRoles()\n    },\n    methods: {\n      initRoles(){\n        this.$store.dispatch('menu/getRoles').then(response => {\n          this.roles = response\n        })\n      },\n      collapseChange(activeNames){\n        if(activeNames == ''){\n          return ;\n        }\n        this.$store.dispatch('menu/getAllMenuTree',activeNames).then(response => {\n          this.data = response.menus\n          this.checkedKeys = response.mids\n        })\n      },\n      cancelUpdateRoleMenu(){\n        this.activeColItem = -1\n      },\n      updateRoleMenu(index){\n        const checkedKeys = this.$refs.tree[index].getCheckedKeys(true)\n        const tmp_id = this.activeColItem\n        const menuData = {\n          role_id: this.activeColItem,\n          mids: checkedKeys\n        }   \n        this.$store.dispatch('menu/updateRoleMenu',menuData).then(response => {\n          if(response.status == 200){\n            this.$message({\n              message: '修改成功',\n              type: 'success'\n            })\n            \n            this.reload()\n            const hasToken = getToken()\n            this.$store.dispatch('user/getInfo',hasToken).then(response => {\n              const userid = response.obj\n              initmenu(this.$router,this.$store,userid)\n            })\n            \n            this.reloadNevigate()\n//          this.$router.go(0)\n          \n          }\n        })\n      }\n      \n    }\n  }\n</script>\n\n<style>\n  .menuConfig{\n    height: 100%;\n    width: 100%;\n    background-color: #FFFFFF;\n    padding: 32px;\n  }\n  \n  .menuConfigByRole{\n    height: 500px;\n    width:100%\n  }\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/userManager/menuConfig/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"menuConfig\"},[_c('div',{staticClass:\"menuConfigByRole\"},[_c('el-collapse',{attrs:{\"accordion\":\"\"},on:{\"change\":_vm.collapseChange},model:{value:(_vm.activeColItem),callback:function ($$v) {_vm.activeColItem=$$v},expression:\"activeColItem\"}},_vm._l((_vm.roles),function(item,index){return _c('el-collapse-item',{key:index,attrs:{\"name\":item.roleid}},[_c('template',{slot:\"title\"},[_vm._v(\"\\n          \"+_vm._s(item.roleName)),_c('i',{staticClass:\"header-icon el-icon-info\"})]),_vm._v(\" \"),_c('div',{staticClass:\"menu-tree\"},[_c('el-tree',{ref:\"tree\",refInFor:true,attrs:{\"data\":_vm.data,\"show-checkbox\":\"\",\"node-key\":\"id\",\"default-expand-all\":\"\",\"expand-on-click-node\":false,\"highlight-current\":\"\",\"default-checked-keys\":_vm.checkedKeys},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar node = ref.node;\nvar data = ref.data;\nreturn _c('span',{staticClass:\"custom-tree-node\"},[_c('span',[_vm._v(_vm._s(data.title))])])}}],null,true)})],1),_vm._v(\" \"),_c('div',{staticStyle:{\"display\":\"block\",\"margin-left\":\"150px\"}},[_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":_vm.cancelUpdateRoleMenu}},[_vm._v(\"取消修改\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.updateRoleMenu(index)}}},[_vm._v(\"确认修改\")])],1)],2)}),1)],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5321ea97\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/userManager/menuConfig/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5321ea97\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5321ea97\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/userManager/menuConfig/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}