webpackJsonp([10],{nahH:function(t,e){},"yA/R":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o("mvHQ"),l=o.n(i),a=(o("XLwt"),{methods:{initData:function(){var t=this,e={page:this.currentPage,pageSize:this.defalut_pageSize};this.$store.dispatch("sysd/getAllEnterprise",e).then(function(e){e.obj.list;t.tableData=e.obj.list,t.totalPage=e.obj.total})},handleSizeChange:function(t){var e=this;console.log("每页 "+t+" 条"),this.defalut_pageSize=t;var o={page:this.currentPage,pageSize:this.defalut_pageSize};this.$store.dispatch("sysd/getAllEnterprise",o).then(function(t){e.tableData=t.obj.list,e.totalPage=t.obj.total})},handleCurrentChange:function(t){var e=this;console.log("当前页: "+t),this.currentPage=t;var o={page:this.currentPage,pageSize:this.defalut_pageSize};this.$store.dispatch("sysd/getAllEnterprise",o).then(function(t){e.tableData=t.obj.list,e.totalPage=t.obj.total})},open:function(){var t=this;this.$store.dispatch("sysd/getAllStation",{page:1,pageSize:1e4}).then(function(e){t.stations=e.obj.list})},add:function(){var t=this;this.$store.dispatch("sysd/addEnterprise",this.form).then(function(e){200==e.status&&(t.$message({message:e.msg,type:"success"}),t.reload())})},showModifyWindow:function(t){this.dialogFormVisible2=!0,this.form1.id=t.id,this.form1.name=t.name,this.form1.contacts=t.contacts,this.form1.contactsNumber=t.contactsNumber,this.form1.mainPollutions=t.mainPollutions,this.form1.pollutionsNum=t.pollutionsNum,this.form1.isExceed=t.isExceed,this.form1.exceedFactor=t.exceedFactor,this.form1.stationId=t.station.id},modify:function(){var t=this;alert(l()(this.form1)),this.$store.dispatch("sysd/updateEnterprise",this.form1).then(function(e){200==e.status&&(t.$message({message:e.msg,type:"success"}),t.reload())})},showDeleteWindow:function(t){this.id=t.id,this.centerDialogVisible=!0},deleteStation:function(){var t=this;this.$store.dispatch("sysd/deleteEnterprise",this.id).then(function(e){t.$message.success(e.msg),t.reload()})}},inject:["reload"],mounted:function(){this.initData()},data:function(){return{tableData:[],currentPage:1,defalut_pageSize:10,dialogFormVisible:!1,dialogFormVisible2:!1,dialogFormVisible3:!1,stations:[],id:"",totalPage:0,centerDialogVisible:!1,form:{id:"",name:"",contacts:"",contactsNumber:"",mainPollutions:"",pollutionsNum:"",isExceed:"",exceedFactor:"",station:""},form1:{id:"",name:"",contacts:"",contactsNumber:"",mainPollutions:"",pollutionsNum:"",isExceed:"",exceedFactor:"",stationId:""}}}}),s={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"enterpriseManager"},[o("div",{staticStyle:{"margin-bottom":"20px",float:"left"}},[o("el-button",{attrs:{type:"success"},on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("添加")])],1),t._v(" "),o("div",{staticClass:"block",staticStyle:{float:"right"}},[o("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[5,10,15,20],"page-size":t.defalut_pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.totalPage},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[o("el-table-column",{attrs:{fixed:"",prop:"id",label:"站点编号",width:"100",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{prop:"name",label:"站点名称",width:"120",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{prop:"contacts",label:"企业联系人",width:"120",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{prop:"contactsNumber",label:"企业联系方式",width:"120",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{prop:"mainPollutions",label:"主要污染物",width:"100",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{prop:"pollutionsNum",label:"排污量",width:"100",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{label:"是否超标",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("div",{directives:[{name:"show",rawName:"v-show",value:0==e.row.isExceed,expression:"scope.row.isExceed == 0"}]},[t._v("正常")]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:1==e.row.isExceed,expression:"scope.row.isExceed == 1"}]},[t._v("超标")])]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"exceedFactor",label:"超标指标",width:"120",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{prop:"station.name",label:"所属站点",width:"120",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){return t.showModifyWindow(e.row)}}},[t._v("修改")]),t._v(" "),o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){return t.showDeleteWindow(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),o("el-dialog",{staticStyle:{"margin-left":"200px","margin-top":"-100px"},attrs:{title:"添加",visible:t.dialogFormVisible,modal:!0,"modal-append-to-body":!1,width:"600px"},on:{"update:visible":function(e){t.dialogFormVisible=e},open:t.open}},[o("div",{staticClass:"add_form",staticStyle:{"padding-left":"100px"}},[o("el-form",{ref:"form",staticStyle:{width:"500px"},attrs:{model:t.form,"label-width":"120px","label-position":"left",size:"small"}},[o("el-form-item",{attrs:{label:"企业编号"}},[o("el-input",{staticStyle:{width:"200px"},model:{value:t.form.id,callback:function(e){t.$set(t.form,"id",e)},expression:"form.id"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"企业名称"}},[o("el-input",{staticStyle:{width:"200px"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"企业联系人"}},[o("el-input",{staticStyle:{width:"200px"},model:{value:t.form.contacts,callback:function(e){t.$set(t.form,"contacts",e)},expression:"form.contacts"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"企业联系方式"}},[o("el-input",{staticStyle:{width:"200px"},model:{value:t.form.contactsNumber,callback:function(e){t.$set(t.form,"contactsNumber",e)},expression:"form.contactsNumber"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"主要污染物"}},[o("el-input",{staticStyle:{width:"200px"},model:{value:t.form.mainPollutions,callback:function(e){t.$set(t.form,"mainPollutions",e)},expression:"form.mainPollutions"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"排污量"}},[o("el-input",{staticStyle:{width:"200px"},model:{value:t.form.pollutionsNum,callback:function(e){t.$set(t.form,"pollutionsNum",e)},expression:"form.pollutionsNum"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"是否超标"}},[o("el-input",{staticStyle:{width:"200px"},model:{value:t.form.isExceed,callback:function(e){t.$set(t.form,"isExceed",e)},expression:"form.isExceed"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"超标指标"}},[o("el-input",{staticStyle:{width:"200px"},model:{value:t.form.exceedFactor,callback:function(e){t.$set(t.form,"exceedFactor",e)},expression:"form.exceedFactor"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"所属站点"}},[o("el-select",{attrs:{placeholder:"请选择所属站点"},model:{value:t.form.station,callback:function(e){t.$set(t.form,"station",e)},expression:"form.station"}},t._l(t.stations,function(t,e){return o("el-option",{key:e,attrs:{label:t.name,value:t.id}})}),1)],1)],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("确 定")])],1)]),t._v(" "),o("el-dialog",{staticStyle:{"margin-left":"200px","margin-top":"-100px"},attrs:{title:"修改",visible:t.dialogFormVisible2,modal:!0,"modal-append-to-body":!1,width:"600px"},on:{"update:visible":function(e){t.dialogFormVisible2=e},open:t.open}},[o("div",{staticClass:"modify_form",staticStyle:{"padding-left":"100px"}},[o("el-form",{ref:"form1",staticStyle:{width:"350px"},attrs:{model:t.form1,"label-width":"120px","label-position":"left",size:"small"}},[o("el-form-item",{attrs:{label:"企业编号"}},[o("el-input",{staticStyle:{width:"200px"},model:{value:t.form1.id,callback:function(e){t.$set(t.form1,"id",e)},expression:"form1.id"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"企业名称"}},[o("el-input",{staticStyle:{width:"200px"},model:{value:t.form1.name,callback:function(e){t.$set(t.form1,"name",e)},expression:"form1.name"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"企业联系人"}},[o("el-input",{staticStyle:{width:"200px"},model:{value:t.form1.contacts,callback:function(e){t.$set(t.form1,"contacts",e)},expression:"form1.contacts"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"企业联系方式"}},[o("el-input",{staticStyle:{width:"200px"},model:{value:t.form1.contactsNumber,callback:function(e){t.$set(t.form1,"contactsNumber",e)},expression:"form1.contactsNumber"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"主要污染物"}},[o("el-input",{staticStyle:{width:"200px"},model:{value:t.form1.mainPollutions,callback:function(e){t.$set(t.form1,"mainPollutions",e)},expression:"form1.mainPollutions"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"排污量"}},[o("el-input",{staticStyle:{width:"200px"},model:{value:t.form1.pollutionsNum,callback:function(e){t.$set(t.form1,"pollutionsNum",e)},expression:"form1.pollutionsNum"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"是否超标"}},[o("el-input",{staticStyle:{width:"200px"},model:{value:t.form1.isExceed,callback:function(e){t.$set(t.form1,"isExceed",e)},expression:"form1.isExceed"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"超标指标"}},[o("el-input",{staticStyle:{width:"200px"},model:{value:t.form1.exceedFactor,callback:function(e){t.$set(t.form1,"exceedFactor",e)},expression:"form1.exceedFactor"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"所属站点"}},[o("el-select",{attrs:{placeholder:"请选择所属站点"},model:{value:t.form1.stationId,callback:function(e){t.$set(t.form1,"stationId",e)},expression:"form1.stationId"}},t._l(t.stations,function(t,e){return o("el-option",{key:e,attrs:{label:t.name,value:t.id}})}),1)],1)],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.modify}},[t._v("确 定")])],1)]),t._v(" "),o("el-dialog",{staticStyle:{"margin-top":"20px"},attrs:{title:"提示",visible:t.centerDialogVisible,width:"30%",center:"","modal-append-to-body":!1},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[o("span",[t._v("该操作会删除位于该站点的设备信息和此设备具有的数据，确定删除吗？")]),t._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.centerDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.deleteStation}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var n=o("VU/8")(a,s,!1,function(t){o("nahH")},null,null);e.default=n.exports}});
//# sourceMappingURL=10.87820d0a0f3c9ffc37a5.js.map