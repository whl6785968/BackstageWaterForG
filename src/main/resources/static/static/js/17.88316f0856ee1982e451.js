webpackJsonp([17],{"25yV":function(t,e){},ITs8:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("bOdI"),a=n.n(i),o=n("lHA8"),r=n.n(o),l=n("XLwt"),s={data:function(){return{entityName:"",option:"",form:{entityFrom:"",startLabel:"",relation:"",entityTo:"",endLabel:""},nodes:[],relationships:[]}},mounted:function(){this.initData()},inject:["reload"],methods:{ellipsis:function(t){return t.length>10&&(t=t.substring(0,10)+"..."),t},initData:function(){var t=this,e=this.entityName.split("@"),n={entityName:e[0],entityId:e[1]};this.$store.dispatch("kg/search2",n).then(function(e){for(var n,i=e.obj,o=new r.a,l=0;l<i.length;l++){var s=t.eliminateEli(i[l].entity)+"@"+i[l].entityId,c=(t.eliminateEli(i[l].entityAmbiguous),t.eliminateEli(i[l].value)+"@"+i[l].valueId),u=t.eliminateEli(i[l].valueAmbiguous);o.add(s),o.add(c,u)}var d=[];o.forEach(function(e,n){var i={name:e,symbolSize:50,itemStyle:{normal:{color:t.generate_color(),show:!0}}};d.push(i)});for(var m=[],g=0;g<i.length;g++){var h={source:t.eliminateEli(i[g].entity)+"@"+i[g].entityId,target:t.eliminateEli(i[g].value)+"@"+i[g].valueId,name:t.eliminateEli(i[g].relation)};m.push(h)}var f={tooltip:{formatter:function(t){return t.data.name}},animationDurationUpdate:1500,animationEasingUpdate:"quinticInOut",series:[(n={type:"graph",layout:"circular",symbolSize:80,roam:!0,label:{normal:{show:!0,color:"black"}},edgeSymbol:["circle","arrow"],edgeSymbolSize:[4,10],edgeLabel:{normal:{textStyle:{fontSize:20}}},force:{repulsion:3e3,edgeLength:[20,80]},draggable:!0,lineStyle:{normal:{width:2,color:"black",curveness:.2,length:20}}},a()(n,"edgeLabel",{normal:{show:!0,formatter:function(t){return t.data.name}}}),a()(n,"data",d),a()(n,"links",m),n)]};t.option=f,t.showKg()})},eliminateEli:function(t){return t=t.replace(/\"/g,"")},add:function(){var t=this;this.$store.dispatch("kg/save",this.form).then(function(e){200==e.status&&(t.$message({message:e.msg,type:"success"}),t.reload())})},getInfo:function(t){},generate_random_color:function(){var t=this.generate_fix_random(50,200),e=this.generate_fix_random(50,200),n=this.generate_fix_random(50,200);return t.toString(16)+e.toString(16)+n.toString(16)},generate_color:function(){var t=this.generate_random_color();return/[^FEfe]/.test(t)&&(t=this.generate_random_color()),"#"+t},generate_fix_random:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},showKg:function(){var t=this,e=document.getElementById("kgShow"),n=l.init(e,"light");n.setOption(this.option);var i=n._model.option.series[0].data;n.on("click",function(e){var n=i[e.dataIndex].name;t.entityName=n,t.initData()}),n.on("mouseover",function(t){console.log(t)})}}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"kgContainer"},[n("div",{staticClass:"search",staticStyle:{"text-align":"center","margin-bottom":"10px","padding-top":"32px"}},[n("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入内容"},model:{value:t.entityName,callback:function(e){t.entityName=e},expression:"entityName"}}),t._v(" "),n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.initData}},[t._v("搜索")])],1),t._v(" "),n("div",{staticClass:"kgShow",staticStyle:{width:"100%",height:"800px"},attrs:{id:"kgShow"}})])},staticRenderFns:[]};var u=n("VU/8")(s,c,!1,function(t){n("25yV")},"data-v-324858d4",null);e.default=u.exports}});
//# sourceMappingURL=17.88316f0856ee1982e451.js.map